<html>
	<head>
		<style>
			html {
			background-color: #000207;
			color: white;
			font-family: sans-serif;
			}
			
			table, th, td {
			border: 1px solid white;
			border-collapse: collapse;
			}
			
			div.SmallFont {
				font-size: 11px;
			}
			
			div.StatisticsTable {
				max-width:900px;
			}
			input[type='text'] { font-family: monospace;}
			input[type='number'] { font-family: monospace;}
			
			span.NoLineBreak {
				white-space: nowrap;
			}
			
			abbr{cursor: help;}
			
			
			img.img-hor {
				-moz-transform: scaleX(-1);
				-o-transform: scaleX(-1);
				-webkit-transform: scaleX(-1);
				transform: scaleX(-1);
				filter: FlipH;
				-ms-filter: "FlipH";
			}
			img.img-rot {
				/* upwards bar */
				transform: rotate(-90deg)
			}
			img.img-downwardsbar {
				/* it performs the transforms right-to-left*/
				transform: scaleY(-1) rotate(-90deg);
			}
.noselect {
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome, Edge, Opera and Firefox */
}
.ClickHoldChangeNumber {
	cursor: ew-resize
}
	input[type='text'] { font-family: monospace;}
	input[type='number'] { font-family: monospace;}
		</style>
	</head>
<body onload="Calculate()"></body>
<a href="../GraphicalBar_ReadmeDocumentation.html#TopJSLink">Back to top</a><br>
<a href="../GraphicalBar_ReadmeDocumentation.html#ComputeGraphicalBarData">Back to info table</a><br>
<a href="DoubleBarInfo.html#DoubleBarSG">Back to Double bar information</a><br><br>
<p>This javascript HTML file simulates the subroutine <kbd>DrawGraphicalBar</kbd> and <kbd>DrawGraphicalBarSubtractionLoopEdition</kbd>.</p>
Notes:<br>
<ul>
<li>The screen is 256 by 224 pixels, therefore when dealing with 8x8 tiles, the number of 8x8s to fill the entire width or height would be 32 tiles wide 28 tiles tall.</li>
<li>The tile display is only available using default number of pieces or zero for left end, middle, and right end, this is because there are way too many different configurations for me to draw every tile.</li>
<li>When using a vertical bar on a stripe image, the tile data write is the same way as horizontal bar using the <kbd>[TTTTTTTT, YXPCCCTT]</kbd> format, ignoring the header and the terminating byte.</li>
</ul>
<span hidden data-comment="This is here so to prevent the browser from unloading and reloading bar image tiles and causing flickers in the preview when updating the inputs">
<img src="GraphicalBarFills/LeftEnd_0_of_3.png">
<img src="GraphicalBarFills/LeftEnd_1_of_3.png">
<img src="GraphicalBarFills/LeftEnd_2_of_3.png">
<img src="GraphicalBarFills/LeftEnd_3_of_3.png">
<img src="GraphicalBarFills/Middle_0_of_8.png">
<img src="GraphicalBarFills/Middle_1_of_8.png">
<img src="GraphicalBarFills/Middle_2_of_8.png">
<img src="GraphicalBarFills/Middle_3_of_8.png">
<img src="GraphicalBarFills/Middle_4_of_8.png">
<img src="GraphicalBarFills/Middle_5_of_8.png">
<img src="GraphicalBarFills/Middle_6_of_8.png">
<img src="GraphicalBarFills/Middle_7_of_8.png">
<img src="GraphicalBarFills/Middle_8_of_8.png">
<img src="GraphicalBarFills/RightEnd_0_of_3.png">
<img src="GraphicalBarFills/RightEnd_1_of_3.png">
<img src="GraphicalBarFills/RightEnd_2_of_3.png">
<img src="GraphicalBarFills/RightEnd_3_of_3.png">
</span>
<table>
<tr><td class="ClickHoldChangeNumber noselect" id="Drag1" data-drag_increment_number_id="FillAmountDec" data-drag_increment_number_type="bigint" data-drag_increment_number_mousemove_distance="8">Fill amount:</td><td><input step="1" type="number" min="0" max="65535" id="FillAmountDec" onchange="UserInputDecToHex('FillAmountDec', 'FillAmountHex', 4, 0n, 65535n); Calculate()" value="0">(<kbd>$</kbd><input class="HexNumberInput" type="text" id="FillAmountHex" onchange="CorrectUserInputHexStringBigInt('FillAmountHex', 4); UserInputHexToDec('FillAmountHex', 'FillAmountDec', 4, 0n, 65535n); Calculate()" value="0000"><button onclick="BigintIncreaseDecreaseHexInput(1n, 'FillAmountHex', 0n, 65535n); UserInputHexToDec('FillAmountHex', 'FillAmountDec', 4, 0n, 65535n); Calculate()">+</button><button onclick="BigintIncreaseDecreaseHexInput(-1n, 'FillAmountHex', 0n, 65535n); UserInputHexToDec('FillAmountHex', 'FillAmountDec', 4, 0n, 65535n); Calculate()">-</button>)
</td></tr>
<tr><td class="ClickHoldChangeNumber noselect" id="Drag2" data-drag_increment_number_id="LeftEndPieceDec" data-drag_increment_number_type="bigint" data-drag_increment_number_mousemove_distance="8">Left End piece:</td><td><input type="number" min="0" max="255" id="LeftEndPieceDec" onchange="UserInputDecToHex('LeftEndPieceDec', 'LeftEndPieceHex', 2, 0n, 255n); Calculate()" value="3">(<kbd>$</kbd><input class="HexNumberInput" type="text" id="LeftEndPieceHex" onchange="CorrectUserInputHexStringBigInt('LeftEndPieceHex', 2); UserInputHexToDec('LeftEndPieceHex', 'LeftEndPieceDec', 2, 0n, 255n); Calculate()" value="03"><button onclick="BigintIncreaseDecreaseHexInput(1n, 'LeftEndPieceHex', 0n, 255n); UserInputHexToDec('LeftEndPieceHex', 'LeftEndPieceDec', 2, 0n, 255n); Calculate()">+</button><button onclick="BigintIncreaseDecreaseHexInput(-1n, 'LeftEndPieceHex', 0n, 255n); UserInputHexToDec('LeftEndPieceHex', 'LeftEndPieceDec', 2, 0n, 255n); Calculate()">-</button>)</td></tr>
<tr><td class="ClickHoldChangeNumber noselect" id="Drag3" data-drag_increment_number_id="MiddlePieceDec" data-drag_increment_number_type="bigint" data-drag_increment_number_mousemove_distance="8">Middle piece:</td><td><input type="number" min="0" max="255" id="MiddlePieceDec" onchange="UserInputDecToHex('MiddlePieceDec', 'MiddlePieceHex', 2, 0n, 255n); Calculate()" value="8">(<kbd>$</kbd><input class="HexNumberInput" type="text" id="MiddlePieceHex" onchange="CorrectUserInputHexStringBigInt('MiddlePieceHex', 2); UserInputHexToDec('MiddlePieceHex', 'MiddlePieceDec', 2, 0n, 255n); Calculate()" value="08"><button onclick="BigintIncreaseDecreaseHexInput(1n, 'MiddlePieceHex', 0n, 255n); UserInputHexToDec('MiddlePieceHex', 'MiddlePieceDec', 2, 0n, 255n); Calculate()">+</button><button onclick="BigintIncreaseDecreaseHexInput(-1n, 'MiddlePieceHex', 0n, 255n); UserInputHexToDec('MiddlePieceHex', 'MiddlePieceDec', 2, 0n, 255n); Calculate()">-</button>)</td></tr>
<tr><td class="ClickHoldChangeNumber noselect" id="Drag4" data-drag_increment_number_id="RightEndPieceDec" data-drag_increment_number_type="bigint" data-drag_increment_number_mousemove_distance="8">Right End piece:</td><td><input type="number" min="0" max="255" id="RightEndPieceDec" onchange="UserInputDecToHex('RightEndPieceDec', 'RightEndPieceHex', 2, 0n, 255n); Calculate()" value="3">(<kbd>$</kbd><input class="HexNumberInput" type="text" id="RightEndPieceHex" onchange="CorrectUserInputHexStringBigInt('RightEndPieceHex', 2); UserInputHexToDec('RightEndPieceHex', 'RightEndPieceDec', 2, 0n, 255n); Calculate()" value="03"><button onclick="BigintIncreaseDecreaseHexInput(1n, 'RightEndPieceHex', 0n, 255n); UserInputHexToDec('RightEndPieceHex', 'RightEndPieceDec', 2, 0n, 255n); Calculate()">+</button><button onclick="BigintIncreaseDecreaseHexInput(-1n, 'RightEndPieceHex', 0n, 255n); UserInputHexToDec('RightEndPieceHex', 'RightEndPieceDec', 2, 0n, 255n); Calculate()">-</button>)</td></tr>
<tr><td class="ClickHoldChangeNumber noselect" id="Drag5" data-drag_increment_number_id="MiddleLengthDec" data-drag_increment_number_type="bigint" data-drag_increment_number_mousemove_distance="8">Length (number of middle tiles):</td><td><input type="number" min="0" max="255" id="MiddleLengthDec" onchange="UserInputDecToHex('MiddleLengthDec', 'MiddleLengthHex', 2, 0n, 255n); Calculate()" value="7">(<kbd>$</kbd><input class="HexNumberInput" type="text" id="MiddleLengthHex" onchange="CorrectUserInputHexStringBigInt('MiddleLengthHex', 2); UserInputHexToDec('MiddleLengthHex', 'MiddleLengthDec', 2, 0n, 255n); Calculate()" value="07"><button onclick="BigintIncreaseDecreaseHexInput(1n, 'MiddleLengthHex', 0n, 255n); UserInputHexToDec('MiddleLengthHex', 'MiddleLengthDec', 2, 0n, 255n); Calculate()">+</button><button onclick="BigintIncreaseDecreaseHexInput(-1n, 'MiddleLengthHex', 0n, 255n); UserInputHexToDec('MiddleLengthHex', 'MiddleLengthDec', 2, 0n, 255n); Calculate()">-</button>)</td></tr>
<tr><td class="ClickHoldChangeNumber noselect" id="Drag6" data-drag_increment_number_id="SecondFillByteTableOffsetDec" data-drag_increment_number_type="bigint" data-drag_increment_number_mousemove_distance="8"><kbd>!Setting_GraphicalBar_SecondFillByteTableOffset</kbd>:</td><td>
<input type="number" min="0" max="257" id="SecondFillByteTableOffsetDec" onchange="UserInputDecToHex('SecondFillByteTableOffsetDec', 'SecondFillByteTableOffsetHex', 2, 0n, 257n); Calculate()" value="32">(<kbd>$<input class="HexNumberInput" type="text" id="SecondFillByteTableOffsetHex" onchange="CorrectUserInputHexStringBigInt('SecondFillByteTableOffsetHex', 2); UserInputHexToDec('SecondFillByteTableOffsetHex', 'SecondFillByteTableOffsetDec', 2, 0n, 257n); Calculate()" value="20"></kbd><button onclick="BigintIncreaseDecreaseHexInput(1n, 'SecondFillByteTableOffsetHex', 0n, 257n); UserInputHexToDec('SecondFillByteTableOffsetHex', 'SecondFillByteTableOffsetDec', 2, 0n, 257n); Calculate()">+</button><button onclick="BigintIncreaseDecreaseHexInput(-1n, 'SecondFillByteTableOffsetHex', 0n, 255n); UserInputHexToDec('SecondFillByteTableOffsetHex', 'SecondFillByteTableOffsetDec', 2, 0n, 257n); Calculate()">-</button>)
</td></tr>
<tr><td class="ClickHoldChangeNumber noselect" id="Drag7" data-drag_increment_number_id="FillByteTable" data-drag_increment_number_type="bigint" data-drag_increment_number_radix="16" data-drag_increment_number_mousemove_distance="8"><kbd>!Scratchram_GraphicalBar_FillByteTbl</kbd> location:</td><td><kbd>$</kbd><input class="HexNumberInput" type="text" maxlength="6" id="FillByteTable" onchange="CorrectUserInputHexStringBigInt('FillByteTable', 6); Calculate()" value="7F844A" list="BarTileTableRAMList"><button onclick="BigintIncreaseDecreaseHexInput(1n, 'FillByteTable', 0n, 16777215n); CorrectUserInputHexStringBigInt('FillByteTable', 6); Calculate()">+</button><button onclick="BigintIncreaseDecreaseHexInput(-1n, 'FillByteTable', 0n, 16777215n); CorrectUserInputHexStringBigInt('FillByteTable', 6); Calculate()">-</button>

<datalist id="BarTileTableRAMList">
<option value="7F844A">Default RAM address table</option>
<option value="400198">SA-1 version</option>
</datalist></td></tr>

<tr><td class="ClickHoldChangeNumber noselect" id="Drag8" data-drag_increment_number_id="TileAddress" data-drag_increment_number_type="bigint" data-drag_increment_number_radix="16" data-drag_increment_number_mousemove_distance="8"><abbr title="The RAM address that is the tile number and/or properties for the status bar or overworld border+.">To write your tiles at address...</abbr>:</td><td><kbd>$</kbd><input class="HexNumberInput" type="text" maxlength="6" id="TileAddress" onchange="CorrectUserInputHexStringBigInt('TileAddress', 6); Calculate()" value="7FA000" list="StatusBarRAMTileList"><button onclick="BigintIncreaseDecreaseHexInput(1n, 'TileAddress', 0n, 16777215n); CorrectUserInputHexStringBigInt('TileAddress', 6); Calculate()">+</button><button onclick="BigintIncreaseDecreaseHexInput(-1n, 'TileAddress', 0n, 16777215n); CorrectUserInputHexStringBigInt('TileAddress', 6); Calculate()">-</button><button onclick="BigintIncreaseDecreaseHexInput(2n, 'TileAddress', 0n, 16777215n); CorrectUserInputHexStringBigInt('TileAddress', 6); Calculate()">+2</button><button onclick="BigintIncreaseDecreaseHexInput(-2n, 'TileAddress', 0n, 16777215n); CorrectUserInputHexStringBigInt('TileAddress', 6); Calculate()">-2</button>

<datalist id="StatusBarRAMTileList">
<option value="7E0F09">SMW's status bar (Writes over &ldquo;TIME&rdquo;)</option>
<option value="7FA000">Super status bar </option>
<option value="404000">Super status bar (SA-1)</option>
<option value="7FA03E">Super status bar (Top right corner)</option>
<option value="40403E">Super status bar (SA-1, top right corner)</option>

<option value="7FEC00">Overworld border plus</option>
<option value="41EC00">Overworld border plus (SA-1)</option>
</datalist></td></tr>

<tr><td>Status bar format:</td><td>
<input type="radio" id="StatusBarFormat1" name="StatusBarFormats" onchange="Calculate()"><label for="StatusBarFormat1"><kbd>[TTTTTTTT, TTTTTTTT,...], [YXPCCCTT, YXPCCCTT,...]</kbd></label><br>
<input type="radio" id="StatusBarFormat2" name="StatusBarFormats" onchange="Calculate()" checked><label for="StatusBarFormat2"><kbd>[TTTTTTTT, YXPCCCTT]</kbd></label></td></tr>

<tr><td>Direction:</td>
<td>
	<label><input type="radio" name="BarDirection" id="RightwardsBar" onchange="Calculate()" checked>Rightwards (<kbd>WriteBarToHUD</kbd>)</label><br>
	<label><input type="radio" name="BarDirection" id="LeftwardsBar" onchange="Calculate()">Leftwards (<kbd>WriteBarToHUDLeftwards</kbd>)</label><br>
	<label><input type="radio" name="BarDirection" id="UpwardsBar" onchange="Calculate()">Upwards (<kbd>GWriteBarToHUDVertically</kbd> with <kbd>$07 == #$00</kbd>)</label><br>
	<label><input type="radio" name="BarDirection" id="DownwardBar" onchange="Calculate()">Downwards (<kbd>GWriteBarToHUDVertically</kbd> with <kbd>$07 == #$02</kbd>)</label>
</td></tr>
<tr><td>Using <kbd>BarExtendLeft</kbd>? (only applies to horizontal bars and not using stripe)</td><td><input type="checkbox" id="ExtendLeftwardsBar" onchange="Calculate()"></td></tr>

<tr><td>Using static end tiles?</td><td>
<input type="checkbox" id="UsingStaticLeftEnd" onchange="Calculate()"><label for="UsingStaticLeftEnd">Left end</label> (&ldquo;left side&rdquo; for horizontal bars, whatever top or bottom the fill starts at for vertical)<br>
<input type="checkbox" id="UsingStaticRightEnd" onchange="Calculate()"><label for="UsingStaticRightEnd">Right end</label> (&ldquo;right side&rdquo; for horizontal bars, whatever top or bottom the fill ends at for vertical)</td></tr>
</table>
<button onclick="Reset(); Calculate()">Reset</button>
<hr>
<span id="Output"></span>


<script>
	//Initalize some variables for mouse dragging
		var MouseDragOriginX = 0
		var MouseDragOriginY = 0
		var WhichElementIDClicked = ""
		var MouseState = ""
		var CurrentNumberInputValueSelected = 0 //may be a double or a bigint
		var MouseCoordinateArray = [,]
	
		window.onload = function(){
			//Add up/down arrow keys to increase or decrease the hex number inputs
				var FocusedElement = document.activeElement;
				if(FocusedElement.addEventListener ) {
					FocusedElement.addEventListener('keydown',this.UpDownArrowKeysIncreaseDecreaseHexInput,false);
				} else if(FocusedElement.attachEvent ) {
					FocusedElement.attachEvent('onkeydown',this.UpDownArrowKeysIncreaseDecreaseHexInput);
				}
			//Add unity-styled drag function (if you click and hold on an area, and move the mouse left and right will increase or decrease)
				for (let Index = 0; Index < document.getElementsByClassName("ClickHoldChangeNumber").length; Index++) {
					document.getElementsByClassName("ClickHoldChangeNumber")[Index].addEventListener('mousedown', PlaceDragOriginPos.bind(event, document.getElementsByClassName("ClickHoldChangeNumber")[Index].id)) //We need to bind the parameters to prevent unintentional execution of this function.
				}
				document.addEventListener('mouseup', ExitPlaceDragOriginPos); //Letting go turns off drag mode
				document.addEventListener('mousemove', MouseMoveChangeNumber); // adjust number based on mouse movement
			//Update
				Calculate()
		}
		function MouseMoveChangeNumber(e) {
			if (MouseState != "PressedDown") {
				MouseDragOriginX = e.clientX
				MouseDragOriginY = e.clientY
			}
			if (MouseState == "PressedDown") {
				MouseCoordinateArray = [e.clientX, e.clientY]
				MouseMoveIncreaseDecrease()
			}
		}
		//When the user let goes of the mouse button.
			function ExitPlaceDragOriginPos() {
				MouseState = "Released"
			}
		function UpDownArrowKeysIncreaseDecreaseHexInput(e) {
			//Arrowkeys for hex number inputs
				if (((e.code == "ArrowUp")||e.code == "ArrowDown")&&((/(^|\s.*?)HexNumberInput($|\s.*?)/).test(document.activeElement.className))) {
					var target;
					var InputNumber = ParseBigIntValue(document.activeElement.value, 16)
					if (!e) var e = window.event;
					if (e.target) target = e.target;
					else if (e.srcElement) target = e.srcElement;
					
					if(e.code == "ArrowUp") {
						InputNumber++
						e.preventDefault()	//Prevents the caret (blinking text cursor) from being placed at the beginning of the line.
					} else if(e.code == "ArrowDown") {
						if (InputNumber > 0n) {
							InputNumber--
						}
					}
					document.activeElement.value = InputNumber.toString(16).toUpperCase()
					document.activeElement.setSelectionRange(document.activeElement.value.length, document.activeElement.value.length)
					//Execute the functions that were in the element's onchange.
						var ActiveElementInputID = document.activeElement.id
						if (ActiveElementInputID == "FillAmountHex") {
							BigintClamp(BigInt("0x" + document.getElementById(ActiveElementInputID).value), 0n, 65535n)
							CorrectUserInputHexStringBigInt('FillAmountHex', 4)
							UserInputHexToDec('FillAmountHex', 'FillAmountDec', 4, 0n, 65535n)
						} else if ((ActiveElementInputID == "LeftEndPieceHex")||(ActiveElementInputID == "MiddlePieceHex")||(ActiveElementInputID == "RightEndPieceHex")||(ActiveElementInputID == "MiddleLengthHex")){
							BigintClamp(BigInt("0x" + document.getElementById(ActiveElementInputID).value), 0n, 255n)
							if (ActiveElementInputID == "LeftEndPieceHex") {
								CorrectUserInputHexStringBigInt('LeftEndPieceHex', 2)
								UserInputHexToDec('LeftEndPieceHex', 'LeftEndPieceDec', 2, 0n, 255n)
							} else if (ActiveElementInputID == "MiddlePieceHex") {
								CorrectUserInputHexStringBigInt('MiddlePieceHex', 2)
								UserInputHexToDec('MiddlePieceHex', 'MiddlePieceDec', 2, 0n, 255n)
							} else if (ActiveElementInputID == "RightEndPieceHex") {
								CorrectUserInputHexStringBigInt('RightEndPieceHex', 2)
								UserInputHexToDec('RightEndPieceHex', 'RightEndPieceDec', 2, 0n, 255n)
							} else if (ActiveElementInputID == "MiddleLengthHex") {
								CorrectUserInputHexStringBigInt('MiddleLengthHex', 2)
								UserInputHexToDec('MiddleLengthHex', 'MiddleLengthDec', 2, 0n, 255n)
							}
						} else if (ActiveElementInputID == "SecondFillByteTableOffsetHex") {
							CorrectUserInputHexStringBigInt('MiddleLengthHex', 2)
							UserInputHexToDec('SecondFillByteTableOffsetHex', 'SecondFillByteTableOffsetDec', 2, 0n, 257n)
						} else if (ActiveElementInputID == "FillByteTable") {
							document.getElementById("FillByteTable").value = (BigintClamp(ParseBigIntValue(document.getElementById("FillByteTable").value, 16), 0n, BigInt("0xFFFFFF")).toString(16))
							CorrectUserInputHexStringBigInt('FillByteTable', 6)
						} else if (ActiveElementInputID == "TileAddress") {
							document.getElementById("TileAddress").value = (BigintClamp(ParseBigIntValue(document.getElementById("TileAddress").value, 16), 0n, BigInt("0xFFFFFF")).toString(16))
							CorrectUserInputHexStringBigInt('TileAddress', 6)
						}
						Calculate()
				}
		}
	function PlaceDragOriginPos(ElementID) {
			if (event.button == 0) { //Prevent other mouse buttons besides the scroll wheel, the right click button, browser-back and browser-fourth button from triggering this.
				WhichElementIDClicked = ElementID	//This is which element the user have clicked on essentially. It's an object
				MouseState = "PressedDown"
				//Adjust source position
					if ((document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_type == null)||(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_type == "number")) {
						CurrentNumberInputValueSelected = parseFloat(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).value)
					} else {
						let Radix = 10
						if ((/^\d+$/).test(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_radix)) {
							Radix = parseInt(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_radix)
							if ((Radix < 2)||(Radix > 36)) {
								Radix = 10
							}
						}
						CurrentNumberInputValueSelected = ParseBigIntValue((document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).value), Radix)
					}
				//Cancel selection (if it didn't cancel selection, it is possible to release the mouse button WITHOUT firing the ExitPlaceDragOriginPos until the user presses and releases the mouse button
				//as it causes the user to drag selected text which could interrupt this)
					if (window.getSelection) {
						if (window.getSelection().empty) {  // Chrome
							window.getSelection().empty();
						} else if (window.getSelection().removeAllRanges) {  // Firefox
							window.getSelection().removeAllRanges();
						}
					} else if (document.selection) {  // IE?
						document.selection.empty();
					}
			}
		}
		function ParseBigIntValue(string, radix) {
			let Output = 0n
			let NegativeNumber = 1n
			if ((/^-/).test(string)) {
				NegativeNumber = -1n
			}
			let DigitPart = string.substring((string.search(/[0-9a-zA-Z]/)))
			switch (radix) {
				//decimal
					default:
					if ((/^-?\d+$/).test(string)) {
						Output = BigInt(string)
					}
					break
				//Hexadecimal
					case 16:
					case "0x":
					case "0X":
					if ((/^-?[0-9A-Fa-f]+$/).test(string)) {
						Output = BigInt("0x" + DigitPart) * NegativeNumber
					}
					break
				//Binary
					case 2:
					case "0b":
					case "0B":
					if ((/^-?[01]+$/).test(string)) {
						Output = BigInt("0b" + DigitPart) * NegativeNumber
					}
			
			}
			return Output
		}
		function RoundedDivisionQuotientRoundHalfUpBigInt(bigintNumberDividend, Divisor) {
			let NegativeResult = 1n
			if (IsSameSign(bigintNumberDividend, Divisor) == false) {
				NegativeResult = -1n
			}
			if (bigintNumberDividend < 0n) {
				bigintNumberDividend *= -1n
			}
			if (Divisor < 0n) {
				Divisor *= -1n
			}
			//Bigint division always rounds towards 0. This function mimics Math.round(bigintNumberDividend / Divisor).
			//Example1: 7 / 5 = 1.4 (or 1 and 2/5) -> Should round towards 1.0.
			//Example2: 8 / 5 = 1.6 (or 1 and 3/5) -> Should round towards 2.0.
			
			//If halfway point of a fraction is an odd number, move this halfway point upwards by 1 unit
			//Using the examples shown earlier, 5 / 2 = 2.5, so this means if the value is 2.5 or higher,
			//it is greater than or equal to half of 5 and should increment the quotient by 1 to simulate
			//a roundup.
			//but we are working with integers, so the only possible values result a roundup is 3+
				let HalfwayPoint = Divisor / 2n
				if ((Divisor % 2n) != 0n) {
					HalfwayPoint++
				}
			if (Divisor != 0n) { //Dividing by zero is not handled unlike double-precision.
				let FractionNumerator = bigintNumberDividend % Divisor
				let Quotient = bigintNumberDividend / Divisor
				if (NegativeResult == 1n) {
					if (FractionNumerator >= HalfwayPoint) {
						Quotient++
					}
				} else {
					//If EQUALS halfway, don't round down.
						if (FractionNumerator > HalfwayPoint) {
							Quotient++
						}
				}
				return Quotient * NegativeResult
			} else {
				return 1n
			}
		}
		function IsSameSign(a, b) {
			//Returns true if both numbers are either positive or negative, otherwise (different signs), returns false.
			//Works with bigint.
			if (((a >= 0n) &&(b >= 0n))||((a < 0n) &&(b < 0n))) {
				return true
			} else {
				return false
			}
		}
	//After pressing down on the mouse key and moves the cursor left or right, to adjust the number in the input.
	//Note to self:
	//- document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id) gets you the object of the input from the element with the class "ClickHoldChangeNumber"
		function MouseMoveIncreaseDecrease() {
			switch (document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_type) {
			case "number":
			case null:
			default:
				let ValueForInput = Math.round((CurrentNumberInputValueSelected + Math.round((MouseCoordinateArray[0] - MouseDragOriginX) / parseInt(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_mousemove_distance)) * InputStepParseFloatValidate(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).step)) / InputStepParseFloatValidate(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).step)) * InputStepParseFloatValidate(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).step)
				//Min and max
					if ((document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).min != "")&&(ValueForInput < parseFloat(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).min))) {
						ValueForInput = parseFloat(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).min)
					}
					if ((document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).max != "")&&(ValueForInput > parseFloat(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).max))) {
						ValueForInput = parseFloat(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).max)
					}
				document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).value = ValueForInput.toFixed(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).dataset.drag_increment_number_tofixed)
				break
			case "bigint":
				let HTMLNumberStep = 1n
				if ((/^(-?\d+)$/).test(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).step)) {
					HTMLNumberStep = BigInt(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).step)
					if (HTMLNumberStep <= 0n) {
						HTMLNumberStep = 1n
					}
				}
				let MouseMoveDistanceToChange = 1n
				if ((/^(-?\d+)$/).test(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_mousemove_distance)) {
					MouseMoveDistanceToChange = BigInt(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_mousemove_distance)
					if (MouseMoveDistanceToChange <= 0n) {
						MouseMoveDistanceToChange = 1n
					}
				}
				let BigintInInput = ParseBigIntValue(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).value, document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_radix)
				let ValueForInputBigInt = RoundedDivisionQuotientRoundHalfUpBigInt(CurrentNumberInputValueSelected + RoundedDivisionQuotientRoundHalfUpBigInt(BigInt(MouseCoordinateArray[0] - MouseDragOriginX), MouseMoveDistanceToChange) * HTMLNumberStep, HTMLNumberStep) * HTMLNumberStep
				//Min and max
					if ((document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).min != "")&&(ValueForInputBigInt < SafeConvertStringToBigint(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).min))) {
						ValueForInputBigInt = SafeConvertStringToBigint(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).min)
					}
					if ((document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).max != "")&&(ValueForInputBigInt > SafeConvertStringToBigint(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).max))) {
						ValueForInputBigInt = SafeConvertStringToBigint(document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).max)
					}
				let Radix = 10
				if ((/^\d+$/).test(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_radix)) {
					Radix = parseInt(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_radix)
					if ((Radix < 2)||(Radix > 36)) {
						Radix = 10
					}
				}
				document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).value = ValueForInputBigInt.toString(Radix).toUpperCase()
				document.getElementById(document.getElementById(WhichElementIDClicked).dataset.drag_increment_number_id).onchange()
			}
		}
		function SafeConvertStringToBigint(string) {
			//Checks if a given number string can convert to a bigint.
			//Returns 0 if cannot, otherwise returns a number version of the given string.
			let Output = 0n
			if (CanConvertToBigInt = (/^(-?\d+)$/).test(string)) {
				Output = BigInt(string)
			} else {
				let Output = 0n
			}
			return Output
		}
	function UserInputHexToDec(WhatInputID, ToWhatInputID, PaddingSize, min, max) {
		let HexNumber = BigintClamp(ParseBigIntValue(document.getElementById(WhatInputID).value, 16), min, max)
		document.getElementById(WhatInputID).value = pad(HexNumber.toString(16).toUpperCase(), PaddingSize)
		document.getElementById(ToWhatInputID).value = HexNumber.toString(10)
	}
	function UserInputDecToHex(WhatInputID, ToWhatInputID, PaddingSize, min, max) {
		let DecNumber = BigintClamp(ParseBigIntValue(document.getElementById(WhatInputID).value, 10), min, max)
		document.getElementById(WhatInputID).value = DecNumber.toString(10)
		document.getElementById(ToWhatInputID).value = pad(DecNumber.toString(16).toUpperCase(), PaddingSize)
	}
	function CorrectUserInputHexStringBigInt(WhatInputID, PaddingSize) {
		let HexNumber = ParseBigIntValue(document.getElementById(WhatInputID).value, 16)
		document.getElementById(WhatInputID).value = pad(HexNumber.toString(16).toUpperCase(), PaddingSize)
	}
	function BigintClamp(num, min, max) {
		//Restrict a number within a specified range, bigInt edition.
		return num <= min ? min : num >= max ? max : num;
	}
	function CorrectDecBigIntValue(String) {
		//This converts the user's input decimal string (negative numbers not allowed)
		//to BigInt.
		if ((/^([0-9])+$/).test(String) == false) {
			String = 0n
		}
		return CanConvertHexStringToBigInt = BigInt(String)
	}
	function BigintIncreaseDecreaseHexInput(ChangeBy, WhatInputID, Min, Max) {
		//To be used along with a hex input the user enters.
		//This function is for the increment/decrement buttons since
		//only the "number" input (only allows characters 0-9) allows
		//the increment/decrement action (up/down button when selected,
		//and pressing up and down).
		//
		//This one is the BigInt version of IncreaseDecreaseHexInput.
		document.getElementById(WhatInputID).value = BigintClamp((ParseBigIntValue(document.getElementById(WhatInputID).value, 16) + ChangeBy), Min, Max).toString(16).toUpperCase()
	}
	function pad(num, size) {
		//This adds leading zeroes. [size] is the number of digits at minimum to show (less than that will fill this with 0s).
		var s = num+"";
		while (s.length < size) s = "0" + s;
		return s;
	}
	function DisplaySignedBigIntHexString(num, PaddingSize) {
		if (num >= 0n) {
			num = "$"+ pad(num.toString(16).toUpperCase(), PaddingSize)
		} else {
			num = "(-$" + pad((num*-1n).toString(16).toUpperCase(), PaddingSize) + ")"
		}
		return num
	}
	function CheckIfNumInRange(Num, RangeMin, RangeMax) {
		//Returns true if Num is in between (inclusive) RangeMin and RangeMax
		var ReturnValue = false
		if ((Num >= RangeMin) && (Num <=  RangeMax)) {
			ReturnValue = true
		}
		return ReturnValue
	}
	function CheckTwoRangesOverlapping(RangeAMin, RangeAMax, RangeBMin, RangeBMax) {
		//Returns true of 2 ranges overlap, examples:
		//A: 1-5, B: 6-10: false
		//A: 1-5, B: 5-9: true
		//A: 1-5, B: 1-5: true
		var ReturnValue = false
		if ((RangeAMax >= RangeBMin) && (RangeAMin <= RangeBMax)) {
			ReturnValue = true
		}
		return ReturnValue
	}
	function BigIntMin(A, B) {
		var ReturnValue = A
		if (B < A) {
			ReturnValue = B
		}
		return ReturnValue
	}
	function BigIntMax(A, B) {
		var ReturnValue = A
		if (B > A) {
			ReturnValue = B
		}
		return ReturnValue
	}
	//----------------------------Stuff that display the output and reset-related main code.
	function Reset() {
		document.getElementById("FillAmountDec").value = "0"
		document.getElementById("FillAmountHex").value = "0000"
		
		document.getElementById("LeftEndPieceDec").value = "3"
		document.getElementById("LeftEndPieceHex").value = "03"
		
		document.getElementById("MiddlePieceDec").value = "8"
		document.getElementById("MiddlePieceHex").value = "08"
		
		document.getElementById("RightEndPieceDec").value = "3"
		document.getElementById("RightEndPieceHex").value = "03"
		
		document.getElementById("MiddleLengthDec").value = "7"
		document.getElementById("MiddleLengthHex").value = "07"
		
		document.getElementById("SecondFillByteTableOffsetDec").value = "32"
		document.getElementById("SecondFillByteTableOffsetHex").value = "20"
		
		document.getElementById("FillByteTable").value = "7F844A"
		document.getElementById("TileAddress").value = "7FA000"
		
		document.getElementById("StatusBarFormat2").checked = true
		
		document.getElementById("RightwardsBar").checked = true
		document.getElementById("ExtendLeftwardsBar").checked = false
		
		document.getElementById("UsingStaticLeftEnd").checked = false
		document.getElementById("UsingStaticRightEnd").checked = false
		
		document.getElementById("Output").innerHTML = ""
	}
	function BetterPercentageUsingInts(Quantity, MaxQuantity, NumberOfDigitsAfterDec) {
		//This function calculates a percentage of a value (must be bigint), and returns a
		//string representing a percentage using fixed-point arithmetic (https://en.wikipedia.org/wiki/Fixed-point_arithmetic ).
		//Unlike a typical Quantity*100/MaxQuantity (or Quantity / MaxQuantity * 100)
		//This also reports if rounding to 0 or 100% have occurred.
		//Note: Don't use negative or decimal numbers for any of the parameters!
		
		//Output: A string:
		//"--" if MaxQuantity is 0 (division by zero in bigint is not handled unlike double-precision floating point)
		//"<number>%" a percentage. Rounds half-up.
		//"Greater than <1*(10**(2+NumberOfDigitsAfterDec_BigInt))-1>" if results between 99.99..% and 100% (avoids rounding up towards 100%).
		//"Less than <1/(10**NumberOfDigitsAfterDec_BigInt)>" is same as above but avoids rounding towards 0%.
		
		//100.0 is 1000 in fixed point notation when NumberOfDigitsAfterDec_BigInt = 1
		//100.00 is 10000 in fixed point notation when NumberOfDigitsAfterDec_BigInt = 2
		//100.000 is 100000 in fixed point notation when NumberOfDigitsAfterDec_BigInt = 3
		Quantity = BigInt(Quantity)
		MaxQuantity = BigInt(MaxQuantity)
		NumberOfDigitsAfterDec_BigInt = BigInt(NumberOfDigitsAfterDec)
		if (MaxQuantity == 0n) {
			return "--"
		} else {
			let Percentage = Quantity * (100n * 10n ** (NumberOfDigitsAfterDec_BigInt)) / MaxQuantity
			let Modulo = Quantity * (100n * 10n ** (NumberOfDigitsAfterDec_BigInt)) % MaxQuantity
			//Check if remainder is greater than or equal to half of MaxQuantity, if so, increment
			//Percentage by 1 unit.
			
			//Get halfway point, note: this must be rounded half up as well so that if Modulo is 0.5 greater in the case MaxQuantity is an odd number,
			//would correctly round upwards. Example: 3/2 is 1.5 (default round to 1), since we are dealing with integers, Remainder being 2 or more should be
			//consider a round up for percentage
				let HalfwayPointOfMaxQuantity = MaxQuantity / 2n
				if ((MaxQuantity % 2n) != 0n) {
					HalfwayPointOfMaxQuantity++
				}
			//Round half-up
				if (Modulo >= HalfwayPointOfMaxQuantity) { //round upwards
					Percentage++
					//We rounded the number up (actually increased the value), but it can potentially be at 100%, lets check it and if it did, override it.
					if (Percentage == 100n*10n**NumberOfDigitsAfterDec_BigInt) {
						//Rounded to 100% detected
						//Note to self:
						//Should say 99% if NumberOfDigitsAfterDec_BigInt = 0
						//Should say 99.9% if NumberOfDigitsAfterDec_BigInt = 1
						//99.99 if NumberOfDigitsAfterDec_BigInt = 2
						//and so on.
						//So basically the number of 9s after the decimal
						//is NumberOfDigitsAfterDec_BigInt.
							let DecimalPortion = ""
							if (NumberOfDigitsAfterDec_BigInt != 0n) {
								DecimalPortion += "."
								for (let NineCount = 0; NineCount < NumberOfDigitsAfterDec; NineCount++) {
									DecimalPortion += "9"
								}
							}
						return "Greater than 99" + DecimalPortion + "%"
					}
				} else {
					//Rounded downwards (default)
					
					if ((Modulo != 0n)&&(Percentage == 0n)) {
						//Rounded to 0% detected
						//Note to self:
						//Should say 1% if NumberOfDigitsAfterDec_BigInt = 0
						//Should say 0.1% if NumberOfDigitsAfterDec_BigInt = 1
						//0.01% if NumberOfDigitsAfterDec_BigInt = 2
						//and so on.
						//Basically, if NumberOfDigitsAfterDec_BigInt = 2, the number of zeros
						//between the decimal point and "1" is NumberOfDigitsAfterDec_BigInt - 1
							let DecimalPortion = ""
							if (NumberOfDigitsAfterDec_BigInt != 0n) {
								DecimalPortion += "."
								for (let ZeroCount = 0; ZeroCount < NumberOfDigitsAfterDec - 1; ZeroCount++) {
									DecimalPortion += "0"
								}
								return "Less than 0" + DecimalPortion + "1%"
							} else {
								return "Less than 1%"
							}
					}
				}
				//Split the number separated by decimal point.
					let OutputString = Percentage.toString(10)
					let WholeNumberPart = OutputString.substring(0, OutputString.length - NumberOfDigitsAfterDec)
					if (WholeNumberPart == "") {
						WholeNumberPart = "0"
					}
					//This make sure that leading zeros (when less than 1%) exists, should the value in fixed point have fewer digits
					//so that it can display things like 0.01 (stored internally in fixed point as 1) instead of 0.1 when NumberOfDigitsAfterDec is set to 2.
					//It is due to the fact that toString(10) removes all leading zeros.
						if (OutputString.length < NumberOfDigitsAfterDec) {
							let NumberOfLeadingZeroesNeeded = NumberOfDigitsAfterDec - OutputString.length //example: 34 (length = 2) which is supposed to be 0.00034% when NumberOfDigitsAfterDec = 5, so 5-2 = 3, so 3 0s are needed.
							let LeadingZeroes = ""
							for (let Count = 0; Count < NumberOfLeadingZeroesNeeded; Count++) {
								LeadingZeroes += "0"
							}
							OutputString = LeadingZeroes + OutputString
						}
					let DecimalPart = OutputString.substring(OutputString.length - NumberOfDigitsAfterDec)
			return WholeNumberPart + "." + DecimalPart + "%"
		}
	}
	function Calculate() {
		//Clear out the output in case it re-concatenate.
			let OutputString = ""
			document.getElementById("Output").innerHTML = ""
		//Obtain variables from inputs
			let FillAmount = CorrectDecBigIntValue(document.getElementById("FillAmountDec").value)
			let LeftEndPiece = CorrectDecBigIntValue(document.getElementById("LeftEndPieceDec").value)
			let MiddlePiece = CorrectDecBigIntValue(document.getElementById("MiddlePieceDec").value)
			let RightEndPiece = CorrectDecBigIntValue(document.getElementById("RightEndPieceDec").value)
			let MiddleLength = CorrectDecBigIntValue(document.getElementById("MiddleLengthDec").value)
			
			let FillByteTable = ParseBigIntValue(document.getElementById("FillByteTable").value, 16)
			let SecondFillOffset = ParseBigIntValue(document.getElementById("SecondFillByteTableOffsetDec").value, 10)
			let SecondFillTable = (ParseBigIntValue(document.getElementById("FillByteTable").value, 16)) + SecondFillOffset
			let TileAddress = ParseBigIntValue(document.getElementById("TileAddress").value, 16)
		//Calculate some variables based on user input
			let LeftTileExist = 0n
			if (LeftEndPiece > 0n) {
				LeftTileExist = 1n
			}
			let RightTileExist = 0n
			if (RightEndPiece > 0n) {
				RightTileExist = 1n
			}
			let NumberOfMiddleTiles = 0n
			if ((MiddlePiece != 0n)&&(MiddleLength != 0n)) {
				NumberOfMiddleTiles = MiddleLength
			}
			
			let TotalNumberOfTileBytes = LeftTileExist + NumberOfMiddleTiles + RightTileExist
			
			let BarOfZeroTiles = false
			if ((LeftTileExist + NumberOfMiddleTiles + RightTileExist) == 0n) {
				BarOfZeroTiles = true
			}
			
			let TotalPieces = LeftEndPiece + (MiddlePiece * MiddleLength) + RightEndPiece
			
			let StatusBarFormat = 1n
			if (document.getElementById("StatusBarFormat2").checked == true) {
				StatusBarFormat = 2n
			}
			let StartingTileAddress = TileAddress
			if (document.getElementById("ExtendLeftwardsBar").checked&&(document.getElementById("RightwardsBar").checked||document.getElementById("LeftwardsBar").checked)) {
				StartingTileAddress = TileAddress - ((TotalNumberOfTileBytes - 1n) * StatusBarFormat)
			}
			
			if (document.getElementById("RightwardsBar").checked||document.getElementById("LeftwardsBar").checked) {
				document.getElementById("ExtendLeftwardsBar").disabled = false
			} else {
				document.getElementById("ExtendLeftwardsBar").disabled = true
			}
		//Display output
			if (BarOfZeroTiles == false) {
				//Title
					OutputString += "<h1>Memory layout and statistics</h1>"
				//RAM summary
					OutputString += "<table>"
					OutputString += "<tr>"
					OutputString += "<td><kbd>!Scratchram_GraphicalBar_FillByteTbl</kbd> memory usage:</td>"
					OutputString += "<td><kbd>$" + pad(FillByteTable.toString(16).toUpperCase(), 6) + "</kbd> to <kbd><abbr title='Index=$" + pad((TotalNumberOfTileBytes - 1n).toString(16).toUpperCase(), 2) + "'>$" + pad((FillByteTable + (TotalNumberOfTileBytes - 1n)).toString(16).toUpperCase(), 6) + "</kbd> (Number of tile bytes used: <kbd>" + TotalNumberOfTileBytes.toString(10) + "</kbd> (<kbd>$" + pad(TotalNumberOfTileBytes.toString(16).toUpperCase(), 2) + "</kbd>))</td>"
					OutputString += "</tr>"
					OutputString += "<tr>"
					OutputString += "<td>Second fill table (when using &ldquo;seperate graphics&rdquo;):</td>"
					OutputString += "<td>"
					OutputString += "<kbd>$" + pad(SecondFillTable.toString(16).toUpperCase(), 6) + "</kbd> to <kbd>$" + pad((SecondFillTable + (TotalNumberOfTileBytes - 1n)).toString(16).toUpperCase(), 6) + "</kbd> (Number of tile bytes used: <kbd>" + TotalNumberOfTileBytes.toString(10) + "</kbd> (<kbd>$" + pad(TotalNumberOfTileBytes.toString(16).toUpperCase(), 2) + "</kbd>))"
					if (CheckTwoRangesOverlapping(FillByteTable, (FillByteTable + (TotalNumberOfTileBytes - 1n)), SecondFillTable, (SecondFillTable + (TotalNumberOfTileBytes - 1n)))) {
						OutputString += "<br><span style='color: red'>Overlap detected at address <kbd>$" + pad((BigIntMax(FillByteTable, SecondFillTable)).toString(16).toUpperCase(), 6) + "</kbd> to <kbd>$" + pad(BigIntMin((FillByteTable + (TotalNumberOfTileBytes - 1n)), (SecondFillTable + (TotalNumberOfTileBytes - 1n))).toString(16).toUpperCase(), 6) + "</kbd>.</span>"
					}
					OutputString += "</td>"
					OutputString += "</tr>"
					OutputString += "<tr>"
					OutputString += "<td>Total pieces (full bar):</td>"
					OutputString += "<td><kbd>" + TotalPieces.toString(10) + "</kbd> (<kbd>$" + pad(TotalPieces.toString(16).toUpperCase(), 4) + "</kbd>)</td>"
					OutputString += "</tr>"
					OutputString += "<tr><th colspan='2'>Tile addresses</th></tr>"
					if (document.getElementById("UsingStaticLeftEnd").checked == true){
						OutputString += "<tr>"
						OutputString += "<td>Static left end:</td>"
						if (document.getElementById("RightwardsBar").checked||document.getElementById("LeftwardsBar").checked) {
							OutputString += "<td><kbd>" + DisplaySignedBigIntHexString((StartingTileAddress) - StatusBarFormat, 6) + "</kbd></td>"
						} else if (document.getElementById("UpwardsBar").checked) {
							OutputString += "<td><kbd>" + DisplaySignedBigIntHexString(StartingTileAddress + (32n*StatusBarFormat), 6) + "</kbd></td>"
						} else { //downwards bar
							OutputString += "<td><kbd>" + DisplaySignedBigIntHexString(StartingTileAddress - (32n*StatusBarFormat), 6) + "</kbd></td>"
						}
						OutputString += "</tr>"
					}
					OutputString += "<tr>"
					OutputString += "<td>Changable tiles:</td>"
					OutputString += "<td>"
					if (document.getElementById("RightwardsBar").checked||document.getElementById("LeftwardsBar").checked) {
						OutputString += "<kbd>" + DisplaySignedBigIntHexString(StartingTileAddress, 6) + "</kbd> to <kbd>" + DisplaySignedBigIntHexString(StartingTileAddress + ((TotalNumberOfTileBytes-1n) * StatusBarFormat), 6) + "</kbd>"
						if (StatusBarFormat == 2n) {
							OutputString += " (<abbr title='Example: " + DisplaySignedBigIntHexString(StartingTileAddress, 6) + ", " + DisplaySignedBigIntHexString(StartingTileAddress +2n, 6) + ", " + DisplaySignedBigIntHexString(StartingTileAddress +4n, 6) + "...'>Every other byte)</abbr>"
						}
					} else {
						if (document.getElementById("UpwardsBar").checked) {
							OutputString += "<kbd>" + DisplaySignedBigIntHexString(StartingTileAddress-((TotalNumberOfTileBytes-1n)*32n*StatusBarFormat), 6) + "</kbd> to <kbd>" + DisplaySignedBigIntHexString(StartingTileAddress, 6) + "</kbd> (only every " + (32n*StatusBarFormat).toString(10) +"  bytes)"
						} else { //downwards bar
							OutputString += "<kbd>" + DisplaySignedBigIntHexString(StartingTileAddress, 6) + "</kbd> to <kbd>" + DisplaySignedBigIntHexString(StartingTileAddress+((TotalNumberOfTileBytes-1n)*32n*StatusBarFormat), 6) + "</kbd> (only every " + (32n*StatusBarFormat).toString(10) + " bytes)"
						}
					}
					OutputString += "</td>"
					OutputString += "</tr>"
					if (document.getElementById("UsingStaticRightEnd").checked == true){
						OutputString += "<tr>"
						OutputString += "<td>Static right end:</td>"
						if (document.getElementById("RightwardsBar").checked||document.getElementById("LeftwardsBar").checked) {
							OutputString += "<td><kbd>" + DisplaySignedBigIntHexString((StartingTileAddress) + (TotalNumberOfTileBytes * StatusBarFormat), 6) + "</kbd></td>"
						} else if (document.getElementById("UpwardsBar").checked) {
							OutputString += "<td><kbd>" + DisplaySignedBigIntHexString(StartingTileAddress - (32n*StatusBarFormat*TotalNumberOfTileBytes), 6) + "</kbd></td>"
						} else { //downwards bar
							OutputString += "<td><kbd>" + DisplaySignedBigIntHexString(StartingTileAddress + (32n*StatusBarFormat*TotalNumberOfTileBytes), 6) + "</kbd></td>"
						}
						OutputString += "</tr>"
					}
					OutputString += "</table><br>"
				//Handle fill byte array (computes the fill byte table array)
					let FillByteTableValues =  new Array(257).fill(0n) //Create an array filled with bigint of zeroes. With maximum number of tiles, only 257 items (index 0-256) needed (1 for left, + 255 for middle, + 1 for right = 257 tiles)
					let RunningFillAmount = FillAmount
					let MiddleTilesLeft = NumberOfMiddleTiles
					let FillAmountIndex = 0n
					//Left end
						if (LeftTileExist != 0n) {
							if (RunningFillAmount < LeftEndPiece) {
								FillByteTableValues[0n] = RunningFillAmount //If less then take all remaining fills
								RunningFillAmount = 0n
							} else {
								FillByteTableValues[0n] = LeftEndPiece //If greater than, then fill all pieces of that tile and subtract fill amount by that number of pieces.
								RunningFillAmount = RunningFillAmount - LeftEndPiece
							}
							FillAmountIndex++
						}
					//Middle
						if (NumberOfMiddleTiles != 0n) {
							while (MiddleTilesLeft != 0n) {
								if (RunningFillAmount < MiddlePiece) {
									FillByteTableValues[FillAmountIndex] = RunningFillAmount
									RunningFillAmount = 0n
								} else {
									FillByteTableValues[FillAmountIndex] = MiddlePiece
									RunningFillAmount = RunningFillAmount - MiddlePiece
								}
								MiddleTilesLeft-- //Number of middle tiles left until no more left.
								FillAmountIndex++
							}
						}
					//Right end
						if (RightTileExist != 0n) {
							if (RunningFillAmount < RightEndPiece) {
								FillByteTableValues[FillAmountIndex] = RunningFillAmount //If less then take all remaining fills
								RunningFillAmount = 0n
							} else {
								FillByteTableValues[FillAmountIndex] = RightEndPiece //If greater than, then fill all pieces of that tile and subtract fill amount by that number of pieces.
								RunningFillAmount = RunningFillAmount - RightEndPiece
							}
							FillAmountIndex++
						}
				//Display the table array of bar tile bytes
					MiddleTilesLeft = NumberOfMiddleTiles
					FillAmountIndex = 0n
					//Left panel
						OutputString += "<table><tr><td><br>"
						OutputString += "<kbd>DrawGraphicalBarSubtractionLoopEdition&apos;s output $00-$01 value: " + RunningFillAmount.toString(10) + " ($" + pad(RunningFillAmount.toString(16).toUpperCase(), 4) + ")</kbd><br><br>"
						var FractionTileProcessed = 0n //>This determines should it say the tile is full (= 0), fraction (0 to max-1) (= 1), or empty (= 2).
						OutputString += "<table>"
						OutputString += "<tr><th><kbd>!Scratchram_GraphicalBar_FillByteTbl</kbd> addresses</th><th><abbr title='When using &ldquo;seperate graphics&rdquo; of displaying 2 fills at the same time, where FirstFill will be stored in.'>Second table</abbr></th><th><abbr title='The values stored in $" + pad(FillByteTable.toString(16).toUpperCase(), 6) + " table.'>Fill amount</th><th>Max fill amount</th><th>Tile byte type</th><th>Tile address</th></tr>"
						//LeftEnd
							if (LeftTileExist != 0n) {
								OutputString += "<tr>"
								OutputString += "<td>"
								OutputString += "<kbd>$" + pad((FillByteTable + FillAmountIndex).toString(16).toUpperCase(), 6) + "</kbd> (<kbd>Address+" + FillAmountIndex.toString(10) + "</kbd>)"
								if (CheckIfNumInRange(FillByteTable + FillAmountIndex, SecondFillTable, (SecondFillTable + (TotalNumberOfTileBytes - 1n)))) {
									OutputString += "<span style='color: red'> Overlap Detected!</span>"
								}
								OutputString += "</td>"
								OutputString += "<td>"
								OutputString += "<kbd>$" + pad((SecondFillTable + FillAmountIndex).toString(16).toUpperCase(), 6) + "</kbd> (<kbd>Address+" + SecondFillOffset.toString(10) + "+" + FillAmountIndex.toString(10) + "</kbd>)"
								if (CheckIfNumInRange(SecondFillTable, FillByteTable, (FillByteTable + (TotalNumberOfTileBytes - 1n)))) {
									OutputString += "<span style='color: red'> Overlap Detected!</span>"
								}
								OutputString += "</td>"
								//Color to indicate full/fraction/empty.
									if (FillByteTableValues[FillAmountIndex] < LeftEndPiece) {
										OutputString += "<td style='background-color: yellow;'><span style='color: black'><kbd>" + (FillByteTableValues[FillAmountIndex]).toString(10) + "</kbd> (<kbd>$" + pad((FillByteTableValues[FillAmountIndex]).toString(16).toUpperCase(), 2) + "</kbd>)</span></td>"
										FractionTileProcessed = 2n //If this tile is fraction, rest should be empty
									} else {
										OutputString += "<td style='background-color: orange'><kbd>" + (FillByteTableValues[FillAmountIndex]).toString(10) + "</kbd> (<kbd>$" + pad((FillByteTableValues[FillAmountIndex]).toString(16).toUpperCase(), 2) + "</kbd>)</td>"
									}
								OutputString += "<td><kbd>" + LeftEndPiece.toString(10) + "</kbd> (<kbd>$" + pad(LeftEndPiece.toString(16).toUpperCase(), 2) + "</kbd>)</td>"
								OutputString += "<td><span style='color: cyan'>Left end</span></td>"
								if (document.getElementById("RightwardsBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString((StartingTileAddress + (FillAmountIndex * StatusBarFormat)), 6) + "</kbd></td>"
								} else if (document.getElementById("LeftwardsBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString((StartingTileAddress + (((TotalNumberOfTileBytes-1n) - FillAmountIndex) * StatusBarFormat)), 6) + "</kbd></td>"
								} else if (document.getElementById("UpwardsBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString(StartingTileAddress - (FillAmountIndex*32n*StatusBarFormat), 6) + "</kbd></td>"
								} else if (document.getElementById("DownwardBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString(StartingTileAddress + (FillAmountIndex*32n*StatusBarFormat), 6) + "</kbd></td>"
								}
								OutputString += "</tr>"
								FillAmountIndex++
							}
						//Middle
							while (MiddleTilesLeft != 0n) {
								OutputString += "<tr>"
								OutputString += "<td>"
								OutputString += "<kbd>$" + pad((FillByteTable + FillAmountIndex).toString(16).toUpperCase(), 6) + "</kbd> (<kbd>Address+" + FillAmountIndex.toString(10) + "</kbd>)"
								if (CheckIfNumInRange(FillByteTable + FillAmountIndex, SecondFillTable, (SecondFillTable + (TotalNumberOfTileBytes - 1n)))) {
									OutputString += "<span style='color: red'> Overlap Detected!</span>"
								}
								OutputString += "</td>"
								OutputString += "<td>"
								OutputString += "<kbd>$" + pad((SecondFillTable + FillAmountIndex).toString(16).toUpperCase(), 6) + "</kbd> (<kbd>Address+" + SecondFillOffset.toString(10) + "+" + FillAmountIndex.toString(10) + "</kbd>)"
								if (CheckIfNumInRange((SecondFillTable + FillAmountIndex), FillByteTable, (FillByteTable + (TotalNumberOfTileBytes - 1n)))) {
									OutputString += "<span style='color: red'> Overlap Detected!</span>"
								}
								OutputString += "</td>"
								//Color to indicate full/fraction/empty.
									if ((FillByteTableValues[FillAmountIndex] < MiddlePiece) && (FractionTileProcessed == 0n)) {
										FractionTileProcessed = 1n //Mark this as a fraction if previous of the 3 sections (left, middle or right) of the bar is full.
									}
									if (FractionTileProcessed == 0n) {
										OutputString += "<td style='background-color: orange'><kbd>" + (FillByteTableValues[FillAmountIndex]).toString(10) + "</kbd> (<kbd>$" + pad((FillByteTableValues[FillAmountIndex]).toString(16).toUpperCase(), 2) + "</kbd>)</td>"
									} else if (FractionTileProcessed == 1n) {
										OutputString += "<td style='background-color: yellow'><span style='color: black'><kbd>" + (FillByteTableValues[FillAmountIndex]).toString(10) + "</kbd> (<kbd>$" + pad((FillByteTableValues[FillAmountIndex]).toString(16).toUpperCase(), 2) + "</kbd>)</span></td>"
										FractionTileProcessed = 2n //After a fraction tile, mark rest as empty
									} else {
										OutputString += "<td style='background-color: grey'><kbd>" + (FillByteTableValues[FillAmountIndex]).toString(10) + "</kbd> (<kbd>$" + pad((FillByteTableValues[FillAmountIndex]).toString(16).toUpperCase(), 2) + "</kbd>)</td>"
									}
								OutputString += "<td><kbd>" + MiddlePiece.toString(10) + "</kbd> (<kbd>$" + pad(MiddlePiece.toString(16).toUpperCase(), 2) + "</kbd>)</td>"
								OutputString += "<td><span style='color: #00FF00'>Middle " + ((NumberOfMiddleTiles - MiddleTilesLeft) + 1n).toString(10) + "</span></td>"
								if (document.getElementById("RightwardsBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString((StartingTileAddress + (FillAmountIndex * StatusBarFormat)), 6) + "</kbd></td>"
								} else if (document.getElementById("LeftwardsBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString((StartingTileAddress + (((TotalNumberOfTileBytes-1n) - FillAmountIndex) * StatusBarFormat)), 6) + "</kbd></td>"
								} else if (document.getElementById("UpwardsBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString(StartingTileAddress - (FillAmountIndex*32n*StatusBarFormat), 6) + "</kbd></td>"
								} else if (document.getElementById("DownwardBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString(StartingTileAddress + (FillAmountIndex*32n*StatusBarFormat), 6) + "</kbd></td>"
								}
								OutputString += "</tr>"
								
								MiddleTilesLeft--
								FillAmountIndex++
							}
						//RightEnd
							if (RightTileExist != 0n) {
								OutputString += "<tr>"
								OutputString += "<td>"
								OutputString += "<kbd>$" + pad((FillByteTable + FillAmountIndex).toString(16).toUpperCase(), 6) + "</kbd> (<kbd>Address+" + FillAmountIndex.toString(10) + "</kbd>)"
								if (CheckIfNumInRange(FillByteTable + FillAmountIndex, SecondFillTable, (SecondFillTable + (TotalNumberOfTileBytes - 1n)))) {
									OutputString += "<span style='color: red'> Overlap Detected!</span>"
								}
								OutputString += "</td>"
								OutputString += "<td>"
								OutputString += "<kbd>$" + pad((SecondFillTable + FillAmountIndex).toString(16).toUpperCase(), 6) + "</kbd> (<kbd>Address+" + SecondFillOffset.toString(10) + "+" + FillAmountIndex.toString(10) + "</kbd>)"
								if (CheckIfNumInRange((SecondFillTable + FillAmountIndex), FillByteTable, (FillByteTable + (TotalNumberOfTileBytes - 1n)))) {
									OutputString += "<span style='color: red'> Overlap Detected!</span>"
								}
								OutputString += "</td>"
								//Color to indicate full/fraction/empty.
									if ((FillByteTableValues[FillAmountIndex] < RightEndPiece) && (FractionTileProcessed == 0n)) {
										FractionTileProcessed = 1n //Mark this as a fraction if previous of the 3 sections (left, middle or right) of the bar is full.
									}
									if (FractionTileProcessed == 0n) {
										OutputString += "<td style='background-color: orange'><kbd>" + (FillByteTableValues[FillAmountIndex]).toString(10) + "</kbd> (<kbd>$" + pad((FillByteTableValues[FillAmountIndex]).toString(16).toUpperCase(), 2) + "</kbd>)</td>"
									} else if (FractionTileProcessed == 1n) {
										OutputString += "<td style='background-color: yellow'><span style='color: black'><kbd>" + (FillByteTableValues[FillAmountIndex]).toString(10) + "</kbd> (<kbd>$" + pad((FillByteTableValues[FillAmountIndex]).toString(16).toUpperCase(), 2) + "</kbd>)</span></td>"
									} else {
										OutputString += "<td style='background-color: grey'><kbd>" + (FillByteTableValues[FillAmountIndex]).toString(10) + "</kbd> (<kbd>$" + pad((FillByteTableValues[FillAmountIndex]).toString(16).toUpperCase(), 2) + "</kbd>)</td>"
									}
								OutputString += "<td><kbd>" + RightEndPiece.toString(10) + "</kbd> (<kbd>$" + pad(RightEndPiece.toString(16).toUpperCase(), 2) + "</kbd>)</td>"
								OutputString += "<td><span style='color: red'>Right end</span></td>"
								if (document.getElementById("RightwardsBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString((StartingTileAddress + (FillAmountIndex * StatusBarFormat)), 6) + "</kbd></td>"
								} else if (document.getElementById("LeftwardsBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString((StartingTileAddress + (((TotalNumberOfTileBytes-1n) - FillAmountIndex) * StatusBarFormat)), 6) + "</kbd></td>"
								} else if (document.getElementById("UpwardsBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString(StartingTileAddress - (FillAmountIndex*32n*StatusBarFormat), 6) + "</kbd></td>"
								} else if (document.getElementById("DownwardBar").checked) {
									OutputString += "<td><kbd>" + DisplaySignedBigIntHexString(StartingTileAddress + (FillAmountIndex*32n*StatusBarFormat), 6) + "</kbd></td>"
								}
								OutputString += "</tr>"
								FillAmountIndex++
							}
						OutputString += "</table><br>"
						OutputString += "</td>"
					//right panel
					//Preview (displays the graphical bar, only works if both ends are set to 3 or 0, and the middle pieces set to 8 or zero).
						OutputString += "<td style='vertical-align: top; text-align: center;'>"
						OutputString += "<h1>In-game preview</h1>"
						if (((LeftEndPiece == 3n)||(LeftEndPiece == 0n))&&((MiddlePiece == 8n)||(MiddlePiece == 0n))&&((RightEndPiece == 3n)||(RightEndPiece == 0n))) {
							MiddleTilesLeft = NumberOfMiddleTiles
							if (document.getElementById("RightwardsBar").checked||document.getElementById("LeftwardsBar").checked) {
								OutputString += "<span class='NoLineBreak'>"
								if (document.getElementById("UsingStaticLeftEnd").checked) {
									OutputString += "<img src='GraphicalBarFills/StaticLeftEnd.png'>"
								}
								if (document.getElementById("RightwardsBar").checked) {
									FillAmountIndex = 0n
									if (LeftEndPiece == 3n) {
										OutputString += "<img src='GraphicalBarFills/LeftEnd_" + FillByteTableValues[FillAmountIndex] + "_of_3.png'>"
										FillAmountIndex++
									}
									if (NumberOfMiddleTiles != 0n) {
										while (MiddleTilesLeft != 0n) {
											OutputString += "<img src='GraphicalBarFills/Middle_" + FillByteTableValues[FillAmountIndex] + "_of_8.png'>"
											FillAmountIndex++
											MiddleTilesLeft--
										}
									}
									if (RightEndPiece == 3n) {
										OutputString += "<img src='GraphicalBarFills/RightEnd_" + FillByteTableValues[FillAmountIndex] + "_of_3.png'>"
										FillAmountIndex++
									}
								} else {
									FillAmountIndex = TotalNumberOfTileBytes - 1n
									if (RightEndPiece == 3n) {
										OutputString += "<img src='GraphicalBarFills/RightEnd_" + FillByteTableValues[FillAmountIndex] + "_of_3.png' class='img-hor'>"
										FillAmountIndex--
									}
									if (NumberOfMiddleTiles != 0n) {
										while (MiddleTilesLeft != 0n) {
											OutputString += "<img src='GraphicalBarFills/Middle_" + FillByteTableValues[FillAmountIndex] + "_of_8.png' class='img-hor'>"
											FillAmountIndex--
											MiddleTilesLeft--
										}
									}
									if (LeftEndPiece == 3n) {
										OutputString += "<img src='GraphicalBarFills/LeftEnd_" + FillByteTableValues[FillAmountIndex] + "_of_3.png' class='img-hor'>"
										FillAmountIndex--
									}
								}
								if (document.getElementById("UsingStaticRightEnd").checked) {
									OutputString += "<img src='GraphicalBarFills/StaticLeftEnd.png' class='img-hor'>"
								}
							} else {
								if (document.getElementById("UpwardsBar").checked) {
									FillAmountIndex = TotalNumberOfTileBytes - 1n
									if (document.getElementById("UsingStaticRightEnd").checked) {
										OutputString += "<img src='GraphicalBarFills/StaticLeftEnd.png' class='img-downwardsbar'><br>" //Although this is a upwards bar, we would like to rotate this 90 degrees and Y-flip it
									}
									if (RightEndPiece == 3n) {
										OutputString += "<img src='GraphicalBarFills/RightEnd_" + FillByteTableValues[FillAmountIndex] + "_of_3.png' class='img-rot'><br>"
										FillAmountIndex--
									}
									if (NumberOfMiddleTiles != 0n) {
										while (MiddleTilesLeft != 0n) {
											OutputString += "<img src='GraphicalBarFills/Middle_" + FillByteTableValues[FillAmountIndex] + "_of_8.png' class='img-rot'><br>"
											FillAmountIndex--
											MiddleTilesLeft--
										}
									}
									if (LeftEndPiece == 3n) {
										OutputString += "<img src='GraphicalBarFills/LeftEnd_" + FillByteTableValues[FillAmountIndex] + "_of_3.png' class='img-rot'><br>"
										FillAmountIndex--
									}
									if (document.getElementById("UsingStaticLeftEnd").checked) {
										OutputString += "<img src='GraphicalBarFills/StaticLeftEnd.png' class='img-rot'><br>"
									}
								} else {//downwards bar
									FillAmountIndex = 0n
									if (document.getElementById("UsingStaticLeftEnd").checked) {
										OutputString += "<img src='GraphicalBarFills/StaticLeftEnd.png' class='img-downwardsbar'><br>" //Although this is a upwards bar, we would like to rotate this 90 degrees and Y-flip it
									}
									if (LeftEndPiece == 3n) {
										OutputString += "<img src='GraphicalBarFills/LeftEnd_" + FillByteTableValues[FillAmountIndex] + "_of_3.png' class='img-downwardsbar'><br>"
										FillAmountIndex++
									}
									if (NumberOfMiddleTiles != 0n) {
										while (MiddleTilesLeft != 0n) {
											OutputString += "<img src='GraphicalBarFills/Middle_" + FillByteTableValues[FillAmountIndex] + "_of_8.png' class='img-downwardsbar'><br>"
											FillAmountIndex++
											MiddleTilesLeft--
										}
									}
									if (RightEndPiece == 3n) {
										OutputString += "<img src='GraphicalBarFills/RightEnd_" + FillByteTableValues[FillAmountIndex] + "_of_3.png' class='img-downwardsbar'><br>"
										FillAmountIndex++
									}
									if (document.getElementById("UsingStaticRightEnd").checked) {
										OutputString += "<img src='GraphicalBarFills/StaticLeftEnd.png' class='img-rot'><br>"
									}
								}
							}
							OutputString += "</span>"
						} else {
							OutputString += "(visual display unavialble)"
						}
			} else {
				OutputString += "Error! A setting have resulted a total of 0 tiles!"
			}
		//Done
			document.getElementById("Output").innerHTML = OutputString
	}
</script>